<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YTMetrics ‚Äî Brand Channel Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --red: #FF2D2D; --bg: #0a0a0a; --surface: #111;
    --surface2: #1a1a1a; --border: #222; --text: #f0f0f0;
    --muted: #555; --accent: #FFD200; --green: #00e676;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--text); font-family:'Syne',sans-serif; min-height:100vh; }
  @keyframes spin { to { transform:rotate(360deg); } }
  @keyframes fadeUp { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
  header { display:flex; align-items:center; justify-content:space-between; padding:16px 32px; border-bottom:1px solid var(--border); background:rgba(10,10,10,0.97); position:sticky; top:0; z-index:100; }
  .logo { display:flex; align-items:center; gap:10px; font-size:18px; font-weight:800; }
  .logo-icon { width:28px; height:28px; background:var(--red); border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:11px; }
  .badge { background:var(--surface); border:1px solid var(--border); border-radius:4px; padding:3px 10px; font-family:'DM Mono',monospace; font-size:10px; color:var(--muted); letter-spacing:.1em; }
  main { padding:24px 32px; max-width:1100px; margin:0 auto; }
  .card { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:24px; margin-bottom:20px; }
  .card.animate { animation:fadeUp .4s ease; }
  .label { font-size:9px; font-weight:700; color:var(--muted); letter-spacing:.12em; text-transform:uppercase; margin-bottom:7px; }
  .panel-title { display:flex; align-items:center; gap:8px; font-size:10px; font-weight:700; color:var(--muted); letter-spacing:.1em; text-transform:uppercase; margin-bottom:16px; }
  .panel-title::before { content:''; width:8px; height:8px; border-radius:50%; background:var(--red); display:inline-block; }
  input { width:100%; background:#0d0d0d; border:1px solid var(--border); border-radius:9px; padding:12px 14px; color:var(--text); font-family:'DM Mono',monospace; font-size:13px; outline:none; transition:border-color .2s; }
  input:focus { border-color:var(--red); }
  .btn { background:var(--red); color:#fff; border:none; border-radius:9px; padding:12px 24px; font-family:'Syne',sans-serif; font-weight:700; font-size:14px; cursor:pointer; white-space:nowrap; transition:all .2s; }
  .btn:hover { background:#e00; transform:translateY(-1px); box-shadow:0 6px 20px rgba(255,45,45,.3); }
  .btn:disabled { background:#333; color:#555; cursor:not-allowed; transform:none; box-shadow:none; }
  .input-grid { display:grid; grid-template-columns:1fr 1fr auto; gap:12px; align-items:end; }
  .error { background:rgba(255,45,45,.07); border:1px solid rgba(255,45,45,.25); border-radius:8px; padding:10px 14px; font-family:'DM Mono',monospace; font-size:12px; color:var(--red); margin-top:12px; display:none; }
  .spinner { width:36px; height:36px; border:3px solid var(--surface2); border-top-color:var(--red); border-radius:50%; animation:spin .8s linear infinite; margin:0 auto 14px; }
  #loading { text-align:center; padding:60px; display:none; }
  .stats-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-top:20px; }
  .stat { background:var(--surface2); border:1px solid var(--border); border-radius:10px; padding:16px; }
  .stat-val { font-size:24px; font-weight:800; letter-spacing:-.03em; margin-top:6px; }
  .two-col { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
  .video-item { display:flex; align-items:center; gap:10px; padding:9px 0; border-bottom:1px solid var(--surface2); }
  .video-item:last-child { border-bottom:none; }
  .video-thumb { width:64px; height:40px; border-radius:5px; object-fit:cover; border:1px solid var(--border); flex-shrink:0; background:var(--surface2); }
  .video-title { font-size:12px; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .video-meta { font-family:'DM Mono',monospace; font-size:10px; color:var(--muted); margin-top:3px; }
  .video-views { font-family:'DM Mono',monospace; font-size:12px; color:var(--accent); font-weight:600; flex-shrink:0; }
  .rank { font-size:10px; font-weight:700; color:#333; width:16px; flex-shrink:0; }
  .metric-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:16px; }
  .metric-card { background:var(--surface2); border-radius:9px; padding:13px; }
  .metric-val { font-size:20px; font-weight:800; margin-top:4px; }
  .bar-row { display:flex; align-items:center; gap:10px; margin-bottom:7px; }
  .bar-label { font-size:10px; font-family:'DM Mono',monospace; color:var(--muted); width:120px; flex-shrink:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .bar-track { flex:1; height:5px; background:var(--surface2); border-radius:99px; }
  .bar-fill { height:100%; border-radius:99px; transition:width 1s ease; }
  .bar-val { font-family:'DM Mono',monospace; font-size:10px; color:var(--muted); width:44px; text-align:right; flex-shrink:0; }
  .bar-date { font-family:'DM Mono',monospace; font-size:10px; color:#333; width:44px; flex-shrink:0; }
  .rec { display:flex; gap:8px; margin-bottom:8px; }
  .rec-arrow { color:var(--red); flex-shrink:0; font-size:12px; }
  .rec-text { font-size:12px; color:#777; line-height:1.5; }
  .report-table { width:100%; border-collapse:collapse; }
  .report-table th { text-align:left; font-size:9px; font-weight:700; color:var(--muted); letter-spacing:.1em; text-transform:uppercase; padding-bottom:10px; border-bottom:1px solid var(--border); }
  .report-table td { padding:10px 0; border-bottom:1px solid var(--surface2); font-size:13px; }
  .report-table tr:last-child td { border-bottom:none; }
  .pill { background:var(--surface2); border-radius:5px; padding:3px 9px; font-family:'DM Mono',monospace; font-size:12px; }
  #channelCard { display:none; }
  #statusLine { font-family:'DM Mono',monospace; font-size:11px; color:var(--muted); margin-top:10px; display:none; }
  @media(max-width:700px) {
    main { padding:16px; }
    .input-grid { grid-template-columns:1fr; }
    .stats-grid { grid-template-columns:repeat(2,1fr); }
    .two-col { grid-template-columns:1fr; }
  }
</style>
</head>
<body>

<header>
  <div class="logo"><div class="logo-icon">‚ñ∂</div>YTMetrics</div>
  <div class="badge">INFLUENCER INTELLIGENCE</div>
</header>

<main>
  <div class="card">
    <div style="font-size:15px;font-weight:700;margin-bottom:4px">Connect Your YouTube Channel</div>
    <div style="font-family:'DM Mono',monospace;font-size:11px;color:var(--muted);margin-bottom:20px">// Enter your channel handle to load analytics</div>
    <div class="input-grid">
      <div>
        <div class="label">Channel Handle or ID</div>
        <input id="channelInput" type="text" placeholder="@YourBrand or UCxxxxxxx" value="@kenazPerfume">
      </div>
      <div>
        <div class="label">YouTube API Key</div>
        <input id="apiKeyInput" type="password" placeholder="AIza...">
      </div>
      <button class="btn" id="analyzeBtn" onclick="startAnalysis()">Analyze ‚Üí</button>
    </div>
    <div id="statusLine"></div>
    <div class="error" id="errorBox"></div>
  </div>

  <div id="loading">
    <div class="spinner"></div>
    <div style="font-family:'DM Mono',monospace;font-size:13px;color:var(--muted)" id="loadingText">Fetching channel data...</div>
    <div style="font-family:'DM Mono',monospace;font-size:11px;color:#333;margin-top:6px">Calling YouTube Data API v3</div>
  </div>

  <div id="channelCard">
    <div class="card animate">
      <div style="display:flex;align-items:center;gap:16px;margin-bottom:20px">
        <img id="chanAvatar" src="" style="width:60px;height:60px;border-radius:50%;border:3px solid var(--red);object-fit:cover" onerror="this.style.display='none'">
        <div style="flex:1">
          <div style="font-size:22px;font-weight:800" id="chanName"></div>
          <div style="font-family:'DM Mono',monospace;font-size:11px;color:var(--muted);margin-top:3px" id="chanHandle"></div>
          <div style="font-size:12px;color:#666;margin-top:5px;max-width:460px" id="chanDesc"></div>
        </div>
        <div style="background:rgba(255,45,45,.08);border:1px solid rgba(255,45,45,.25);color:var(--red);border-radius:6px;padding:5px 12px;font-size:10px;font-weight:700">BRAND CHANNEL</div>
      </div>
      <div class="stats-grid">
        <div class="stat"><div class="label">Subscribers</div><div class="stat-val" id="statSubs">‚Äî</div></div>
        <div class="stat"><div class="label">Total Views</div><div class="stat-val" id="statViews">‚Äî</div></div>
        <div class="stat"><div class="label">Videos Published</div><div class="stat-val" id="statVids">‚Äî</div></div>
        <div class="stat"><div class="label">Avg Views / Video</div><div class="stat-val" id="statAvg">‚Äî</div></div>
      </div>
    </div>

    <div class="two-col" style="margin-bottom:20px">
      <div class="card animate">
        <div class="panel-title">Top Videos by Views</div>
        <div id="topVideos"></div>
      </div>
      <div class="card animate">
        <div class="panel-title">Engagement Metrics</div>
        <div class="metric-grid">
          <div class="metric-card" style="border-left:3px solid var(--red)"><div class="label">Engagement Rate</div><div class="metric-val" id="mEngRate">‚Äî</div></div>
          <div class="metric-card" style="border-left:3px solid var(--accent)"><div class="label">Like Rate</div><div class="metric-val" id="mLikeRate">‚Äî</div></div>
          <div class="metric-card" style="border-left:3px solid var(--green)"><div class="label">Comment Rate</div><div class="metric-val" id="mCommentRate">‚Äî</div></div>
          <div class="metric-card" style="border-left:3px solid #888"><div class="label">Total Likes</div><div class="metric-val" id="mTotalLikes">‚Äî</div></div>
        </div>
        <div class="label" style="margin-bottom:10px">Team Recommendations</div>
        <div id="recommendations"></div>
      </div>
    </div>

    <div class="card animate">
      <div class="panel-title">View Performance ‚Äî All Videos</div>
      <div id="barChart"></div>
    </div>

    <div class="card animate">
      <div class="panel-title">Influencer Team Report Card</div>
      <table class="report-table">
        <thead><tr><th>Metric</th><th>Value</th><th>Health</th><th>Team Action</th></tr></thead>
        <tbody id="reportBody"></tbody>
      </table>
    </div>
  </div>
</main>

<script>
  const fmt = n => { n=parseInt(n); if(isNaN(n))return"‚Äî"; if(n>=1e9)return(n/1e9).toFixed(1)+"B"; if(n>=1e6)return(n/1e6).toFixed(1)+"M"; if(n>=1e3)return(n/1e3).toFixed(1)+"K"; return n.toLocaleString(); };
  const pct = (a,b) => b>0?(a/b*100).toFixed(2):"0";
  const healthColor = (v,lo,hi) => parseFloat(v)>=hi?"#00e676":parseFloat(v)>=lo?"#FFD200":"#FF2D2D";
  const healthLabel = (v,lo,hi) => parseFloat(v)>=hi?"‚úì Strong":parseFloat(v)>=lo?"~ Average":"‚Üì Low";

  function setStatus(msg) {
    const el=document.getElementById("statusLine");
    el.style.display="block"; el.textContent="// "+msg;
  }
  function showError(msg) {
    const el=document.getElementById("errorBox");
    el.textContent="‚ö† "+msg; el.style.display="block";
    document.getElementById("loading").style.display="none";
    document.getElementById("analyzeBtn").disabled=false;
  }

  async function yt(endpoint, params) {
    const apiKey = document.getElementById("apiKeyInput").value.trim();
    if (!apiKey) throw new Error("Please enter your YouTube API key.");
    const url = new URL(`https://www.googleapis.com/youtube/v3/${endpoint}`);
    url.searchParams.set("key", apiKey);
    Object.entries(params).forEach(([k,v]) => url.searchParams.set(k,v));
    const res = await fetch(url.toString());
    const data = await res.json();
    if (data.error) throw new Error(`YouTube API: ${data.error.message}`);
    return data;
  }

  async function startAnalysis() {
    const raw = document.getElementById("channelInput").value.trim();
    if (!raw) return showError("Please enter a channel handle or ID.");
    if (!document.getElementById("apiKeyInput").value.trim()) return showError("Please enter your YouTube API key.");
    document.getElementById("errorBox").style.display="none";
    document.getElementById("channelCard").style.display="none";
    document.getElementById("loading").style.display="block";
    document.getElementById("analyzeBtn").disabled=true;

    try {
      const handle = raw.replace(/^@/,"");
      setStatus("Fetching channel info...");
      document.getElementById("loadingText").textContent="Step 1/4 ‚Äî Fetching channel info...";

      let chanData;
      if (raw.startsWith("UC")) {
        chanData = await yt("channels",{part:"snippet,statistics,contentDetails",id:raw});
      } else {
        chanData = await yt("channels",{part:"snippet,statistics,contentDetails",forHandle:handle});
      }
      if (!chanData.items?.length) {
        const s = await yt("search",{part:"snippet",type:"channel",q:handle,maxResults:1});
        if (!s.items?.length) throw new Error("Channel not found. Try the Channel ID (starts with UC...).");
        chanData = await yt("channels",{part:"snippet,statistics,contentDetails",id:s.items[0].id.channelId});
      }
      if (!chanData.items?.length) throw new Error("Channel not found.");

      const ch=chanData.items[0], stats=ch.statistics, snip=ch.snippet;
      const uploadsId=ch.contentDetails?.relatedPlaylists?.uploads;
      if (!uploadsId) throw new Error("Could not find uploads playlist.");

      document.getElementById("loadingText").textContent="Step 2/4 ‚Äî Loading video list...";
      const pl = await yt("playlistItems",{part:"contentDetails",playlistId:uploadsId,maxResults:25});
      const videoIds = (pl.items||[]).map(i=>i.contentDetails?.videoId).filter(Boolean);
      if (!videoIds.length) throw new Error("No videos found.");

      document.getElementById("loadingText").textContent="Step 3/4 ‚Äî Fetching video stats...";
      const vs = await yt("videos",{part:"statistics,snippet",id:videoIds.join(",")});
      const videos = (vs.items||[]).map(v=>({
        title:v.snippet?.title||"Untitled",
        thumb:v.snippet?.thumbnails?.medium?.url||v.snippet?.thumbnails?.default?.url||"",
        date:(v.snippet?.publishedAt||"").slice(0,7),
        views:parseInt(v.statistics?.viewCount)||0,
        likes:parseInt(v.statistics?.likeCount)||0,
        comments:parseInt(v.statistics?.commentCount)||0,
      })).sort((a,b)=>b.views-a.views);

      document.getElementById("loadingText").textContent="Step 4/4 ‚Äî Computing insights...";
      const tv=videos.reduce((s,v)=>s+v.views,0);
      const tl=videos.reduce((s,v)=>s+v.likes,0);
      const tc=videos.reduce((s,v)=>s+v.comments,0);
      const avgViews=videos.length?Math.round(tv/videos.length):0;
      const likeRate=pct(tl,tv), commentRate=(+pct(tc,tv)).toFixed(3), engRate=pct(tl+tc,tv);

      document.getElementById("chanAvatar").src=snip.thumbnails?.high?.url||snip.thumbnails?.default?.url||"";
      document.getElementById("chanName").textContent=snip.title||"";
      document.getElementById("chanHandle").textContent=(snip.customUrl||`@${handle}`)+(snip.country?` ¬∑ ${snip.country}`:"");
      document.getElementById("chanDesc").textContent=(snip.description||"").slice(0,130)+(snip.description?.length>130?"‚Ä¶":"");
      document.getElementById("statSubs").textContent=stats.hiddenSubscriberCount?"Hidden":fmt(stats.subscriberCount);
      document.getElementById("statViews").textContent=fmt(stats.viewCount);
      document.getElementById("statVids").textContent=fmt(stats.videoCount);
      document.getElementById("statAvg").textContent=fmt(avgViews);

      document.getElementById("topVideos").innerHTML=videos.slice(0,5).map((v,i)=>`
        <div class="video-item">
          <div class="rank">#${i+1}</div>
          <img class="video-thumb" src="${v.thumb}" onerror="this.style.display='none'">
          <div style="flex:1;min-width:0"><div class="video-title">${v.title}</div><div class="video-meta">üëç ${fmt(v.likes)} üí¨ ${fmt(v.comments)}</div></div>
          <div class="video-views">${fmt(v.views)}</div>
        </div>`).join("");

      document.getElementById("mEngRate").textContent=engRate+"%";
      document.getElementById("mLikeRate").textContent=likeRate+"%";
      document.getElementById("mCommentRate").textContent=commentRate+"%";
      document.getElementById("mTotalLikes").textContent=fmt(tl);

      const recs=[
        parseInt(stats.subscriberCount)<10000&&"Grow subscribers via influencer collabs & paid promotions",
        parseFloat(likeRate)<2&&"Add like CTAs at the 30s mark and end screen",
        parseFloat(commentRate)<0.1&&"Ask questions in video to drive comment engagement",
        avgViews<1000&&"Improve SEO: keyword-rich titles, tags & descriptions",
        "Reply to every comment within the first hour of posting",
        "A/B test thumbnail styles ‚Äî faces & bold text perform best",
      ].filter(Boolean).slice(0,4);
      document.getElementById("recommendations").innerHTML=recs.map(r=>`<div class="rec"><div class="rec-arrow">‚Üí</div><div class="rec-text">${r}</div></div>`).join("");

      const maxV=videos[0]?.views||1;
      document.getElementById("barChart").innerHTML=videos.map((v,i)=>`
        <div class="bar-row">
          <div class="bar-label" title="${v.title}">${v.title}</div>
          <div class="bar-track"><div class="bar-fill" style="width:0%;background:${i===0?'#FF2D2D':'#2a2a2a'}" data-w="${(v.views/maxV*100).toFixed(1)}"></div></div>
          <div class="bar-val">${fmt(v.views)}</div>
          <div class="bar-date">${v.date}</div>
        </div>`).join("");
      setTimeout(()=>{ document.querySelectorAll(".bar-fill").forEach(el=>{el.style.width=el.dataset.w+"%";}); },100);

      document.getElementById("reportBody").innerHTML=[
        {l:"Subscribers",v:stats.hiddenSubscriberCount?"Hidden":fmt(stats.subscriberCount),raw:stats.subscriberCount,lo:10000,hi:100000,a:"Run giveaways & influencer collabs"},
        {l:"Total Views",v:fmt(stats.viewCount),raw:stats.viewCount,lo:100000,hi:1000000,a:"Repurpose top videos as Shorts"},
        {l:"Avg Views/Video",v:fmt(avgViews),raw:avgViews,lo:1000,hi:10000,a:"Boost hero content with paid ads"},
        {l:"Engagement Rate",v:engRate+"%",raw:engRate,lo:2,hi:4,a:"Add polls & community posts weekly"},
        {l:"Like Rate",v:likeRate+"%",raw:likeRate,lo:2,hi:4,a:"Place CTA at 30% & 80% of video"},
        {l:"Comment Rate",v:commentRate+"%",raw:commentRate,lo:0.05,hi:0.2,a:"Reply to all comments in first 24hr"},
        {l:"Total Videos",v:fmt(stats.videoCount),raw:stats.videoCount,lo:20,hi:100,a:"Aim for consistent weekly uploads"},
      ].map(r=>`<tr><td style="font-weight:600">${r.l}</td><td><span class="pill">${r.v}</span></td><td style="font-weight:700;color:${healthColor(r.raw,r.lo,r.hi)}">${healthLabel(r.raw,r.lo,r.hi)}</td><td style="font-size:12px;color:var(--muted)">${r.a}</td></tr>`).join("");

      document.getElementById("loading").style.display="none";
      document.getElementById("channelCard").style.display="block";
      setStatus(`‚úì Done ‚Äî ${videos.length} videos analyzed`);
    } catch(e) { showError(e.message||"Something went wrong."); }
    document.getElementById("analyzeBtn").disabled=false;
  }

  document.addEventListener("keydown", e=>{ if(e.key==="Enter") startAnalysis(); });
</script>
</body>
</html>




